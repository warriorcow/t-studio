---
import Container from './UI/Container.astro';
import Title from "./UI/Title.astro";
import Button from "./UI/Button.astro";
import {Image} from "astro:assets";
import AuchanLogo from '../assets/auchan_logo.svg';
import GasLogo from '../assets/gas_logo.svg';
import AlfaLogo from '../assets/alfa_logo.svg';
import MediumArrow from '../assets/arrow-medium.svg';

const slides = [{
  title: 'Разработка и интеграция сервисов для инвестиций',
  logo: AlfaLogo,
  buttonText: 'Подробнее'
},{
  title: 'Мобильное приложение и сайт-презентация',
  logo: GasLogo,
  buttonText: 'Подробнее'
},{
  title: 'Дизайн сайта',
  logo: AuchanLogo,
  buttonText: 'Подробнее'
},{
  title: 'Разработка и интеграция сервисов для инвестиций',
  logo: AlfaLogo,
  buttonText: 'Подробнее'
},{
  title: 'Мобильное приложение и сайт-презентация',
  logo: GasLogo,
  buttonText: 'Подробнее'
},{
  title: 'Дизайн сайта',
  logo: AuchanLogo,
  buttonText: 'Подробнее'
}]
---

<Container gap>
  <div class="cases">
    <div class="cases__header">
      <Title
          text="Наши кейсы"
          tag="h2"
      />
      <Button text="Оценить проект" />

      <div class="cases__navigation">
        <div class="cases__arrow cases__arrow--prev" />
        <div class="cases__arrow cases__arrow--next" />
      </div>
    </div>

    <div class="cases__body">
      <div class="cases__swiper swiper">
        <div class="cases__wrapper swiper-wrapper">
          {slides.map(slide =>
              <div class="cases__slide swiper-slide">
                <div class="cases__item">
                  <div class="cases__logo">
                    <Image src={slide.logo} alt="Logo" />
                  </div>
                  <div class="cases__text">
                    {slide.title}
                  </div>
                  <button class="cases__button">
                    {slide.buttonText}
                  </button>
                </div>
              </div>
          )}
        </div>
      </div>
    </div>
  </div>
</Container>

<style lang="scss" is:global>
  .cases {
    &__header {
      display: flex;
      gap: 0 30px;
      align-items: center;
    }

    &__navigation {
      display: flex;
      margin-left: auto;
    }

    &__body {
      margin-top: 50px;
    }

    &__navigation {
      display: flex;
      gap: 0 10px;
    }

    &__arrow {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 57px;
      height: 57px;
      border-radius: 100%;
      background: #3F65FF;
      cursor: pointer;

      &--prev {
        &::after {
          transform: rotate(180deg);
        }
      }

      &::after {
        content: '';
        display: inline-flex;
        width: 29px;
        height: 27px;
        mask: url("../assets/arrow-medium.svg");
        mask-size: contain;
        mask-repeat: no-repeat;
        mask-position: center;
        background-color: $secondary;
      }
    }

    &__wrapper {}

    &__slide {
      height: 100% !important;
    }

    &__item {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      height: 100%;
      gap: 30px 0;
      padding: 35px 20px;
      background: #FFFFFF;
      border: 1px solid #000000;
      border-radius: 20px;
    }

    &__logo {
      width: 100%;
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: center;

      img {
        height: auto;
        width: auto;
        object-fit: contain;
      }
    }

    &__text {
      @include MontserratMedium26;
    }

    &__button {
      @include MontserratMedium18;

      margin-top: auto;
      display: flex;
      align-items: center;
      color: #3F65FF;

      &::after {
        content: '';
        display: inline-flex;
        width: 22px;
        height: 16px;
        mask: url("../assets/arrow-small.svg");
        mask-size: contain;
        mask-repeat: no-repeat;
        mask-position: center;
        margin-left: 5px;
        background-color: #3F65FF;
      }
    }
  }
</style>

<script>
  import Swiper from 'swiper';
  import { Navigation } from 'swiper/modules';
  import 'swiper/css';

  new Swiper(".cases__swiper", {
    modules: [Navigation],
    slidesPerView: 3,
    spaceBetween: 24,
    loop: true,
    autoHeight: true,
    navigation: {
      nextEl: '.cases__arrow--next',
      prevEl: '.cases__arrow--prev',
    }
  });
</script>